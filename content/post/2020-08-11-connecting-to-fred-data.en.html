---
title: "Connecting to FRED Data"
author: "Colin James"
date: '2020-08-11'
output: pdf_document
categories: []
tags: []
subtitle: ''
summary: ''
authors: []
lastmod: '2020-08-11T21:18:32-04:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
slug: connecting-to-fred-data
---



<div id="reading-in-data-from-fred" class="section level3">
<h3>Reading in Data From FRED</h3>
<pre class="r"><code>#install.packages(&quot;modelr&quot;)
#install.packages(&quot;FinCal&quot;)
#install.packages(&quot;dplyr&quot;)
#install.packages(&quot;FinancialMath&quot;)
#install.packages(&quot;devtools&quot;)
#install.packages(&quot;tidyverse&quot;)
#install.packages(&quot;dplyr&quot;)
#install.packages(&quot;ggpubr&quot;)
#install.packages(&quot;epitools&quot;)
#install.packages(&quot;data.table&quot;)
#install.packages(&quot;usmap&quot;)
#install.packages(&quot;maps&quot;)
#install.packages(&quot;cowplot&quot;)
#install.packages(&quot;ztable&quot;)

library(&quot;modelr&quot;)
library(&quot;FinCal&quot;) 
library(&quot;dplyr&quot;)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(&quot;FinancialMath&quot;)
library(&quot;ggplot2&quot;)
library(&quot;quantmod&quot;)</code></pre>
<pre><code>## Loading required package: xts</code></pre>
<pre><code>## Warning: package &#39;xts&#39; was built under R version 3.5.2</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## 
## Attaching package: &#39;xts&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<pre><code>## Loading required package: TTR</code></pre>
<pre><code>## Warning: package &#39;TTR&#39; was built under R version 3.5.2</code></pre>
<pre><code>## Version 0.4-0 included new data defaults. See ?getSymbols.</code></pre>
<pre><code>## 
## Attaching package: &#39;quantmod&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:FinCal&#39;:
## 
##     lineChart</code></pre>
<pre class="r"><code>library(&quot;epitools&quot;)</code></pre>
<pre><code>## Warning: package &#39;epitools&#39; was built under R version 3.5.2</code></pre>
<pre class="r"><code>library(&quot;data.table&quot;)</code></pre>
<pre><code>## Warning: package &#39;data.table&#39; was built under R version 3.5.2</code></pre>
<pre><code>## 
## Attaching package: &#39;data.table&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:xts&#39;:
## 
##     first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     between, first, last</code></pre>
<pre class="r"><code>library(&quot;usmap&quot;)</code></pre>
<pre><code>## Warning: package &#39;usmap&#39; was built under R version 3.5.2</code></pre>
<pre class="r"><code>library(&quot;maps&quot;)
library(&quot;cowplot&quot;)</code></pre>
<pre><code>## Warning: package &#39;cowplot&#39; was built under R version 3.5.2</code></pre>
<pre><code>## 
## ********************************************************</code></pre>
<pre><code>## Note: As of version 1.0.0, cowplot does not change the</code></pre>
<pre><code>##   default ggplot2 theme anymore. To recover the previous</code></pre>
<pre><code>##   behavior, execute:
##   theme_set(theme_cowplot())</code></pre>
<pre><code>## ********************************************************</code></pre>
<pre class="r"><code>library(&quot;ztable&quot;)</code></pre>
<pre><code>## Welcome to package ztable ver 0.2.0</code></pre>
</div>
<div id="connecting-to-fred-through-an-r-package-downloaded-from-github" class="section level2">
<h2>Connecting to FRED through an R package downloaded from GitHub</h2>
</div>
<div id="us-gdp-from-jan-1st-1990-to-today" class="section level2">
<h2>US GDP from Jan 1st, 1990 to today</h2>
<pre class="r"><code>#See https://fred.stlouisfed.org/docs/api/fred/ for FRED Data information


#See https://fred.stlouisfed.org/tags/series for series IDs
fredr(series_id = &quot;UNRATE&quot;,
  observation_start = as.Date(&quot;1990-01-01&quot;))</code></pre>
<pre><code>## # A tibble: 367 x 3
##    date       series_id value
##    &lt;date&gt;     &lt;chr&gt;     &lt;dbl&gt;
##  1 1990-01-01 UNRATE      5.4
##  2 1990-02-01 UNRATE      5.3
##  3 1990-03-01 UNRATE      5.2
##  4 1990-04-01 UNRATE      5.4
##  5 1990-05-01 UNRATE      5.4
##  6 1990-06-01 UNRATE      5.2
##  7 1990-07-01 UNRATE      5.5
##  8 1990-08-01 UNRATE      5.7
##  9 1990-09-01 UNRATE      5.9
## 10 1990-10-01 UNRATE      5.9
## # … with 357 more rows</code></pre>
<pre class="r"><code>#US GDP from Jan 1st 1990 to now
GDP &lt;- fredr(series_id = &quot;GDP&quot;,
  observation_start = as.Date(&quot;1990-01-01&quot;))

GDP %&gt;%
  ggplot(aes(x = date, y = value)) +
  geom_line()  +
  ggtitle(&quot;GDP for US in Billions of Dollars&quot;) +
  labs(x = &quot;Date&quot;, y = &quot;Billions of Dollars&quot;)</code></pre>
<p><img src="/post/2020-08-11-connecting-to-fred-data.en_files/figure-html/unnamed-chunk-3-1.png" width="672" />
[Us GDP has steadily increased since 1990 with slight deviations from norm in 2009 and most recently 2020. 2009 deviation explained by 2008 financial crisis, and 2020 deviation explained by the COVID pandemic.]</p>
</div>
<div id="percentage-change-in-richmond-virginia-poverty-rate-since-january-71990" class="section level2">
<h2>Percentage Change in Richmond, Virginia Poverty Rate since January 7,1990</h2>
<pre class="r"><code>#Change in Richmond, Virginia Poverty Rate since January 7,1990
RVA_POV &lt;- fredr(series_id = &quot;S1701ACS051760&quot;,
  observation_start = as.Date(&quot;2013-01-01&quot;),
  frequency = &quot;a&quot;)

RVA_POV %&gt;%
  ggplot(aes(x = date, y = value)) +
  geom_line()  +
  ggtitle(&quot;Poverty Rate for Richmond VA&quot;) +
  labs(x = &quot;Date&quot;, y = &quot;% of Population&quot;)</code></pre>
<p><img src="/post/2020-08-11-connecting-to-fred-data.en_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>[Poverty Rate in Richmond, Virginia has decreased since 2013 from 25.6% to 24.5%. With an economy that improved substantially during this time period, this observation doesn’t seem difficult to imagine]</p>
<pre class="r"><code>#Home ownership rate for Virginia
VA_Home &lt;- fredr(series_id = &quot;VAHOWN&quot;,
  observation_start = as.Date(&quot;1984-01-01&quot;),
  frequency = &quot;a&quot;)

VA_Home %&gt;%
  ggplot(aes(x = date, y = value)) +
  geom_line()  +
  ggtitle(&quot;Home Ownership in VA&quot;) +
  labs(x = &quot;Date&quot;, y = &quot;% in Population&quot;)</code></pre>
<p><img src="/post/2020-08-11-connecting-to-fred-data.en_files/figure-html/unnamed-chunk-5-1.png" width="672" />
[Home Ownership in Virginia appears to have peaks in 1989, 1994, 2001, 2003, 2007, 2013, 2017 and 2019. From this visualization you can clearly see the the housing bubble in the early 2000s that led to the 2008 financial crisis. Home ownership appears to have a slight decline since 2007.]</p>
</div>
<div id="correlation-analysis-of-tips-interest-rates-and-nyse-stock-prices" class="section level2">
<h2>Correlation Analysis of TIPS Interest Rates and NYSE Stock Prices</h2>
<pre class="r"><code>#Daily Interest Rates for 10 Year Treasury Inflation Indexed Securities
T_INT_RATES &lt;- fredr(series_id = &quot;DFII10&quot;,
  observation_start = as.Date(&quot;2003-01-02&quot;),
  frequency = &quot;d&quot;)

#Daily Stock Data is downloaded using quantmod
DJI &lt;- getSymbols(&quot;DIA&quot;, src = &quot;yahoo&quot;, from = &#39;2003-01-02&#39;, to = &quot;2020-07-31&quot;, auto.assign = TRUE)</code></pre>
<pre><code>## &#39;getSymbols&#39; currently uses auto.assign=TRUE by default, but will
## use auto.assign=FALSE in 0.5-0. You will still be able to use
## &#39;loadSymbols&#39; to automatically load data. getOption(&quot;getSymbols.env&quot;)
## and getOption(&quot;getSymbols.auto.assign&quot;) will still be checked for
## alternate defaults.
## 
## This message is shown once per session and may be disabled by setting 
## options(&quot;getSymbols.warning4.0&quot;=FALSE). See ?getSymbols for details.</code></pre>
<pre class="r"><code>DIA_Daily_Return &lt;- dailyReturn(DIA)

#Daily Stock Prices are Plotted
DIA_Daily_Return %&gt;%
  ggplot(aes(x = index(DIA_Daily_Return), y = daily.returns)) +
  geom_line(size=0.5, color=&quot;steel blue&quot;) +
  ggtitle(&quot;Daily Return for Dow Jones ETF since 2003&quot;) +
  scale_x_date(date_breaks = &quot;years&quot;, date_labels = &quot;%Y&quot;) +
  labs(x = &quot;Date&quot;, y = &quot;Adjusted Price&quot;)</code></pre>
<p><img src="/post/2020-08-11-connecting-to-fred-data.en_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>#Left Join by Date
DIA_Daily_Return &lt;- data.frame(DIA_Daily_Return)

DIA_Daily_Return$date &lt;- as.Date(rownames(DIA_Daily_Return))

T_INT_RATES$TIPS_Rate &lt;- T_INT_RATES$value

Int_Rate_Stock_Data &lt;- merge(x = DIA_Daily_Return, y = T_INT_RATES, by = &quot;date&quot;, all.x = TRUE)

head(Int_Rate_Stock_Data)</code></pre>
<pre><code>##         date daily.returns series_id value TIPS_Rate
## 1 2003-01-02  0.0241235645    DFII10  2.43      2.43
## 2 2003-01-03  0.0020886633    DFII10  2.43      2.43
## 3 2003-01-06  0.0151690248    DFII10  2.46      2.46
## 4 2003-01-07  0.0005703548    DFII10  2.42      2.42
## 5 2003-01-08 -0.0176698926    DFII10  2.29      2.29
## 6 2003-01-09  0.0186840088    DFII10  2.41      2.41</code></pre>
<pre class="r"><code>cor.test(Int_Rate_Stock_Data$daily.returns, Int_Rate_Stock_Data$TIPS_Rate)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  Int_Rate_Stock_Data$daily.returns and Int_Rate_Stock_Data$TIPS_Rate
## t = -0.59466, df = 4391, p-value = 0.5521
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.03853599  0.02060440
## sample estimates:
##          cor 
## -0.008973643</code></pre>
<p>[Similarly, this analysis was done to try to determine if there was a strong correlation between the Dow Jones and Interest Rates for 10 Year Treasury Inflation Indexed Securities. The thought behind this was increased TIP rates signaled an improving economy thus causing an increase in the price of the Dow Jones Index and in this case an ETF. With a P value above the .05 threshold there is not enough evidence to suggest a relationship exists.]</p>
</div>
<div id="correlation-analysis-of-tips-interest-rates-and-gdp" class="section level2">
<h2>Correlation Analysis of TIPS Interest Rates and GDP</h2>
<pre class="r"><code>#Daily Interest Rates for S&amp;P/Case-Shiller U.S. National Home Price Index
HPI &lt;- fredr(series_id = &quot;CSUSHPINSA&quot;,
  observation_start = as.Date(&quot;2003-01-02&quot;),
  frequency = &quot;m&quot;)

#Daily Stock Data is downloaded using quantmod
DJI &lt;- getSymbols(&quot;DIA&quot;, src = &quot;yahoo&quot;, from = &#39;2003-01-02&#39;, to = &quot;2020-05-31&quot;, auto.assign = TRUE)

DIA_Monthly_Return &lt;- monthlyReturn(DIA)

#Left Join by Date
DIA_Monthly_Return &lt;- data.frame(DIA_Monthly_Return)

DIA_Monthly_Return$date &lt;- seq(as.Date(&quot;2003/1/1&quot;), as.Date(&quot;2020/5/31&quot;), by = &quot;month&quot;)

HPI$index &lt;- HPI$value

HPI_Stock_Data &lt;- merge(x = DIA_Monthly_Return, y = HPI, by = &quot;date&quot;, all.x = TRUE)

head(HPI_Stock_Data)</code></pre>
<pre><code>##         date monthly.returns  series_id   value   index
## 1 2003-01-01    -0.039334592 CSUSHPINSA 127.652 127.652
## 2 2003-02-01    -0.018926250 CSUSHPINSA 128.327 128.327
## 3 2003-03-01     0.006430488 CSUSHPINSA 129.310 129.310
## 4 2003-04-01     0.063142082 CSUSHPINSA 130.490 130.490
## 5 2003-05-01     0.046900718 CSUSHPINSA 131.841 131.841
## 6 2003-06-01     0.012044215 CSUSHPINSA 133.226 133.226</code></pre>
<pre class="r"><code>cor.test(HPI_Stock_Data$monthly.returns, HPI_Stock_Data$index)</code></pre>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  HPI_Stock_Data$monthly.returns and HPI_Stock_Data$index
## t = -0.44315, df = 207, p-value = 0.6581
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.1658081  0.1053686
## sample estimates:
##         cor 
## -0.03078631</code></pre>
<p>[Similarly to the two analyses above, this analysis is done to determine if there was a relationship between the DJI and the S&amp;P/Case-Schiller Housing Price Index. The thought behind this was an increased housing price index signaled an improving economy, causing an increase in the price of the Dow Jones Index and in this case an ETF. With a P value above the .05 threshold there is not enough evidence to suggest a relationship exists.]</p>
</div>
<div id="total-gross-domestic-product-map-by-state" class="section level2">
<h2>Total Gross Domestic Product Map by State</h2>
<pre class="r"><code>#https://fred.stlouisfed.org/release?rid=140

#Created list of FRED variables.  Values were divided into x and y groups because for some reason R would not run all of the variables in one group
x &lt;- list(&quot;CARGSP&quot;,&quot;TXNGSP&quot;, &quot;NYNGSP&quot;,&quot;FLNGSP&quot;,&quot;OHNGSP&quot;, &quot;WANGSP&quot;,&quot;CONGSP&quot;,&quot;MINGSP&quot;,&quot;MANGSP&quot;,&quot;AZNGSP&quot;,&quot;HINGSP&quot;,&quot;PANGSP&quot;, &quot;NJNGSP&quot;,&quot;ILNGSP&quot;,&quot;NCNGSP&quot;,&quot;ALNGSP&quot;,&quot;MONGSP&quot;,&quot;LANGSP&quot;,&quot;WINGSP&quot;,&quot;MNNGSP&quot;,&quot;ORNGSP&quot;,&quot;MSNGSP&quot;,&quot;SCNGSP&quot;,&quot;CTNGSP&quot;,&quot;INNGSP&quot;,&quot;TNNGSP&quot;,&quot;KYNGSP&quot;,&quot;AKNGSP&quot;,&quot;DCNGSP&quot;,&quot;GANGSP&quot;,&quot;VANGSP&quot;,&quot;UTNGSP&quot;,&quot;IANGSP&quot;,&quot;NMNGSP&quot;,&quot;NDNGSP&quot;,&quot;WVNGSP&quot;,&quot;WYNGSP&quot;,&quot;MDNGSP&quot;,&quot;NENGSP&quot;,&quot;MENGSP&quot;,&quot;IDNGSP&quot;,&quot;NVNGSP&quot;,&quot;MTNGSP&quot;,&quot;KSNGSP&quot;,&quot;RINGSP&quot;,&quot;OKNGSP&quot;,&quot;VTNGSP&quot;,&quot;SDNGSP&quot;,&quot;ARNGSP&quot;,&quot;NHNGSP&quot;,&quot;DENGSP&quot;)



z &lt;- list(&quot;California&quot;, &quot;Texas&quot;, &quot;New York&quot;,&quot;Florida&quot;,&quot;Ohio&quot;, &quot;Washington&quot;, &quot;Colorado&quot;,&quot;Michigan&quot;, &quot;Massachusetts&quot;,&quot;Arizona&quot;,&quot;Hawaii&quot;,&quot;Pennsylvania&quot;,&quot;New Jersey&quot;,&quot;Illinois&quot;,&quot;North Carolina&quot;,&quot;Alabama&quot;,&quot;Missouri&quot;,&quot;Louisiana&quot;,&quot;Wisconsin&quot;,&quot;Minnesota&quot;,&quot;Oregon&quot;,&quot;Mississippi&quot;,&quot;South Carolina&quot;,&quot;Connecticut&quot;,&quot;Indiana&quot;,&quot;Tennessee&quot;,&quot;Kentucky&quot;,&quot;Alaska&quot;, &quot;District of Columbia&quot;,&quot;Georgia&quot;,&quot;Virginia&quot;,&quot;Utah&quot;,&quot;Iowa&quot;,&quot;New Mexico&quot;,&quot;North Dakota&quot;,&quot;West Virginia&quot;,&quot;Wyoming&quot;,&quot;Maryland&quot;,&quot;Nebraska&quot;,&quot;Maine&quot;,&quot;Idaho&quot;,&quot;Nevada&quot;,&quot;Montana&quot;,&quot;Kansas&quot;,&quot;Rhode Island&quot;,&quot;Oklahoma&quot;,&quot;Vermont&quot;,&quot;South Dakota&quot;,&quot;Arkansas&quot;,&quot;New Hampshire&quot;,&quot;Delaware&quot;)

#Loop Designed to run this function and name datasets by the FRED variable.
for (p in x){
  
name &lt;- fredr(series_id = p,
  observation_start = as.Date(&quot;2003-01-02&quot;),
  frequency = &quot;a&quot;)

assign(p, name)

}

#Using the rbind function to combine all rows together for a full dataset with all states and years in one table
GDP_ALL &lt;- rbind(CARGSP$value,TXNGSP$value, NYNGSP$value,FLNGSP$value,OHNGSP$value, WANGSP$value,CONGSP$value,MINGSP$value,MANGSP$value,AZNGSP$value,HINGSP$value,PANGSP$value, NJNGSP$value,ILNGSP$value,NCNGSP$value,ALNGSP$value,MONGSP$value,LANGSP$value,WINGSP$value, MNNGSP$value,ORNGSP$value,MSNGSP$value,SCNGSP$value,CTNGSP$value,INNGSP$value,TNNGSP$value,KYNGSP$value,AKNGSP$value,DCNGSP$value,GANGSP$value,VANGSP$value,UTNGSP$value,IANGSP$value,NMNGSP$value,NDNGSP$value,WVNGSP$value,WYNGSP$value,MDNGSP$value,NENGSP$value,MENGSP$value,IDNGSP$value,NVNGSP$value,MTNGSP$value,KSNGSP$value,RINGSP$value,OKNGSP$value,VTNGSP$value,SDNGSP$value,ARNGSP$value,NHNGSP$value,DENGSP$value)

value = c(&quot;California&quot;, &quot;Texas&quot;, &quot;New York&quot;,&quot;Florida&quot;,&quot;Ohio&quot;, &quot;Washington&quot;, &quot;Colorado&quot;,&quot;Michigan&quot;, &quot;Massachusetts&quot;,&quot;Arizona&quot;,&quot;Hawaii&quot;,&quot;Pennsylvania&quot;,&quot;New Jersey&quot;,&quot;Illinois&quot;,&quot;North Carolina&quot;,&quot;Alabama&quot;,&quot;Missouri&quot;,&quot;Louisiana&quot;,&quot;Wisconsin&quot;,&quot;Minnesota&quot;,&quot;Oregon&quot;,&quot;Mississippi&quot;,&quot;South Carolina&quot;,&quot;Connecticut&quot;,&quot;Indiana&quot;,&quot;Tennessee&quot;,&quot;Kentucky&quot;,&quot;Alaska&quot;, &quot;District of Columbia&quot;,&quot;Georgia&quot;,&quot;Virginia&quot;,&quot;Utah&quot;,&quot;Iowa&quot;,&quot;New Mexico&quot;,&quot;North Dakota&quot;,&quot;West Virginia&quot;,&quot;Wyoming&quot;,&quot;Maryland&quot;,&quot;Nebraska&quot;,&quot;Maine&quot;,&quot;Idaho&quot;,&quot;Nevada&quot;,&quot;Montana&quot;,&quot;Kansas&quot;,&quot;Rhode Island&quot;,&quot;Oklahoma&quot;,&quot;Vermont&quot;,&quot;South Dakota&quot;,&quot;Arkansas&quot;,&quot;New Hampshire&quot;,&quot;Delaware&quot;)

#Changing row names to the states listed above
row.names(GDP_ALL) &lt;- value

#column names are changed to years 2003-2019
 colnames(GDP_ALL) &lt;- c(&quot;2003&quot;, &quot;2004&quot;, &quot;2005&quot;, &quot;2006&quot;, &quot;2007&quot;, &quot;2008&quot;, &quot;2009&quot;, &quot;2010&quot;, &quot;2011&quot;, &quot;2012&quot;, &quot;2013&quot;,
&quot;2014&quot;, &quot;2015&quot;, &quot;2016&quot;, &quot;2017&quot;, &quot;2018&quot;, &quot;2019&quot;)


#Part 1: Map of States
 
 #To create each map, new datasets were created for each year, variables are renamed and columns are erased.  This was done 17 times for years 2003 to 2019
 
 ####### 2003
Year2003 &lt;- data.frame(GDP_ALL[,1])

Year2003$year &lt;- 2003

Year2003$GDP &lt;- Year2003$GDP_ALL...1.

Year2003$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2003 = select(Year2003, -c(&quot;GDP_ALL...1.&quot;))

####### 2004
Year2004 &lt;- data.frame(GDP_ALL[,2])

Year2004$year &lt;- 2004

Year2004$GDP &lt;- Year2004[,1]

Year2004$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2004 = Year2004[,-1]


######### 2005
Year2005 &lt;- data.frame(GDP_ALL[,3])

Year2005$year &lt;- 2005

Year2005$GDP &lt;- Year2005[,1]

Year2005$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2005 = Year2005[,-1]

#########  2006
Year2006 &lt;- data.frame(GDP_ALL[,4])

Year2006$year &lt;- 2006

Year2006$GDP &lt;- Year2006[,1]

Year2006$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2006 = Year2006[,-1]

#########   2007
Year2007 &lt;- data.frame(GDP_ALL[,5])

Year2007$year &lt;- 2007

Year2007$GDP &lt;- Year2007[,1]

Year2007$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2007 = Year2007[,-1]

#########   2008
Year2008 &lt;- data.frame(GDP_ALL[,6])

Year2008$year &lt;- 2008

Year2008$GDP &lt;- Year2008[,1]

Year2008$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2008 = Year2008[,-1]

#########   2009
Year2009 &lt;- data.frame(GDP_ALL[,7])

Year2009$year &lt;- 2009

Year2009$GDP &lt;- Year2009[,1]

Year2009$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2009 = Year2009[,-1]

#########   2010
Year2010 &lt;- data.frame(GDP_ALL[,8])

Year2010$year &lt;- 2010

Year2010$GDP &lt;- Year2010[,1]

Year2010$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2010 = Year2010[,-1]


#########   2011
Year2011 &lt;- data.frame(GDP_ALL[,9])

Year2011$year &lt;- 2011

Year2011$GDP &lt;- Year2011[,1]

Year2011$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2011 = Year2011[,-1]

#########   2012
Year2012 &lt;- data.frame(GDP_ALL[,10])

Year2012$year &lt;- 2012

Year2012$GDP &lt;- Year2012[,1]

Year2012$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2012 = Year2012[,-1]

#########   2013
Year2013 &lt;- data.frame(GDP_ALL[,11])

Year2013$year &lt;- 2013

Year2013$GDP &lt;- Year2013[,1]

Year2013$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2013 = Year2013[,-1]

#########    2014
Year2014 &lt;- data.frame(GDP_ALL[,12])

Year2014$year &lt;- 2014

Year2014$GDP &lt;- Year2014[,1]

Year2014$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2014 = Year2014[,-1]

#########    2015
Year2015 &lt;- data.frame(GDP_ALL[,13])

Year2015$year &lt;- 2015

Year2015$GDP &lt;- Year2015[,1]

Year2015$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2015 = Year2015[,-1]

#########    2016
Year2016 &lt;- data.frame(GDP_ALL[,14])

Year2016$year &lt;- 2016

Year2016$GDP &lt;- Year2016[,1]

Year2016$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2016 = Year2016[,-1]

#########    2017
Year2017 &lt;- data.frame(GDP_ALL[,15])

Year2017$year &lt;- 2017

Year2017$GDP &lt;- Year2017[,1]

Year2017$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2017 = Year2017[,-1]

#########   2018
Year2018 &lt;- data.frame(GDP_ALL[,16])

Year2018$year &lt;- 2018

Year2018$GDP &lt;- Year2018[,1]

Year2018$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2018 = Year2018[,-1]

#########    2019
Year2019 &lt;- data.frame(GDP_ALL[,17])

Year2019$year &lt;- 2019

Year2019$GDP &lt;- Year2019[,1]

Year2019$state &lt;- c(&quot;california&quot;, &quot;texas&quot;, &quot;new york&quot;,&quot;florida&quot;,&quot;ohio&quot;, &quot;washington&quot;, &quot;colorado&quot;,&quot;michigan&quot;, &quot;massachusetts&quot;,&quot;arizona&quot;,&quot;hawaii&quot;,&quot;pennsylvania&quot;,&quot;new jersey&quot;,&quot;illinois&quot;,&quot;north carolina&quot;,&quot;alabama&quot;,&quot;missouri&quot;,&quot;louisiana&quot;,&quot;wisconsin&quot;,&quot;minnesota&quot;,&quot;oregon&quot;,&quot;mississippi&quot;,&quot;south carolina&quot;,&quot;connecticut&quot;,&quot;indiana&quot;,&quot;tennessee&quot;,&quot;kentucky&quot;,&quot;alaska&quot;, &quot;district of columbia&quot;,&quot;georgia&quot;,&quot;virginia&quot;,&quot;utah&quot;,&quot;iowa&quot;,&quot;new mexico&quot;,&quot;north dakota&quot;,&quot;west virginia&quot;,&quot;wyoming&quot;,&quot;maryland&quot;,&quot;nebraska&quot;,&quot;maine&quot;,&quot;idaho&quot;,&quot;nevada&quot;,&quot;montana&quot;,&quot;kansas&quot;,&quot;rhode island&quot;,&quot;oklahoma&quot;,&quot;vermont&quot;,&quot;south dakota&quot;,&quot;arkansas&quot;,&quot;new hampshire&quot;,&quot;delaware&quot;)

Year2019 = Year2019[,-1]

#########################################################################

#Rows from seperate datasets are bound together
GroupTable &lt;- bind_rows(Year2003,Year2004,Year2005,Year2006,Year2007,Year2008,Year2009,Year2010,Year2011,Year2012,Year2013,Year2014,Year2015,Year2016,Year2017,Year2018,Year2019, .id = &quot;df&quot;) 

#Using this function I was able to derive Long and Lat values for each state
MainStates &lt;- map_data(&quot;state&quot;)

MainStates$state &lt;- MainStates$region

merged = GroupTable %&gt;% inner_join(MainStates, by = &quot;state&quot;)

#Function was designed to create a facet_wrap with ggplot meaning separate maps for separate years to show any trends over time.  This functionality makes time series analyses easier
p &lt;- ggplot()

p0 &lt;- p + geom_polygon (data=merged, aes( x = long, y = lat, group = group, fill= GDP), 
                       color = &quot;white&quot;, size = 0.2)

p1 &lt;- p0 + geom_polygon(color = &quot;gray90&quot;, size = 0.05) +
    coord_map(projection = &quot;albers&quot;, lat0 = 39, lat1 = 45) 

p2 &lt;- p1 + scale_fill_viridis_c(option = &quot;plasma&quot;)


p2 + theme_map() + facet_wrap(~ year, ncol = 3) +
    theme(legend.position = &quot;bottom&quot;,
          strip.background = element_blank()) +
    labs(fill = &quot;Total Annual GDP&quot;,
         title = &quot;Total GDP by Year and by State, 2003-2019&quot;)  </code></pre>
<p><img src="/post/2020-08-11-connecting-to-fred-data.en_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>[This analysis was done to visualize Total GDP spread by state through years 2003 - 2019. Given the mass of data, the visualizations are a bit smaller than anticipated but general trends are: California has the highest total GDP of all states and this increases by the year as shown by the increased yellow tint, Texas appears to have the second highest total GDP in comparison with an increasing trend through the years.]</p>
<div id="total-gdp-by-state-by-year-a-heat-map" class="section level3">
<h3>Total GDP by State by Year, A Heat Map</h3>
<pre class="r"><code>z = ztable(GDP_ALL) 

makeHeatmap(z)</code></pre>
<p>[This analysis is much easier to read than the map above. Using the heat map we can easily see that California has the highest GDP of all states for every year, followed by Texas and New York. The general trend is an increase in total GDP from 2003 to 2019.]</p>
</div>
</div>
